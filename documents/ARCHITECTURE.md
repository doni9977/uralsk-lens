# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî Uralsk Lens üîß

> –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤, –ø–æ—á–µ–º—É —Ç–∞–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–∞–∫ –≤—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.

---

## –ö—Ä–∞—Ç–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è üìÇ
- **`server.js`** ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Express, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã, –º–∞—Ä—à—Ä—É—Ç—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î.
- **`app/`** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ (MVC-–ø–æ–¥–æ–±–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è):
  - `config/` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `db.config.js`).
  - `controllers/` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã).
  - `middlewares/` ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (auth, upload –∏ —Ç.–ø.).
  - `models/` ‚Äî Mongoose –º–æ–¥–µ–ª–∏ (—Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö).
  - `routes/` ‚Äî —Ä–æ—É—Ç—ã, —Å–≤—è–∑—ã–≤–∞—é—â–∏–µ URL —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏.
- **`front/`** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (HTML/CSS/JS).
- **`uploads/`** ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `/uploads`).
- **`.env`** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (MONGO_URI, JWT_SECRET, PORT).
- **`package.json`** ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞.

---

## –ü–æ—á–µ–º—É —Ç–∞–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –∫–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç üí°
- **`controllers`** ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç `req`, `res`, –≤—ã–ø–æ–ª–Ω—è—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (—á–∞—Å—Ç–æ —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª–∏) –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –æ—Ç–¥–µ–ª—è–µ—Ç —Ä–æ—É—Ç—ã (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é) –æ—Ç –ª–æ–≥–∏–∫–∏.
- **`models`** ‚Äî –º–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (Mongoose). –≠—Ç–æ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏.
- **`routes`** ‚Äî –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –ü–æ–¥–∫–ª—é—á–∞—é—Ç middleware –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, –¥–µ–ª–∞—é—Ç –Ω–∞–±–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö API-–ø—É—Ç–µ–π –æ—á–µ–≤–∏–¥–Ω—ã–º.
- **`middlewares`** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`authJwt.js`), –ø—Ä–∏–µ–º —Ñ–∞–π–ª–æ–≤ (`upload.middleware.js`) –∏ –¥—Ä.
- **`config`** ‚Äî –∫–æ–Ω—Ñ–∏–≥ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î. –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞–º–µ–Ω—É/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.

–≠—Ç–æ—Ç –Ω–∞–±–æ—Ä –∏–º—ë–Ω –∏ –ø–∞–ø–æ–∫ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏ —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ–º—ã–π –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã: —Å—Ä–∞–∑—É –≤–∏–¥–Ω–æ, –∫—É–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏, –º–∞—Ä—à—Ä—É—Ç—ã –∏–ª–∏ middleware.

---

## –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º —Ñ–∞–π–ª–∞–º –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º üß©

### `server.js`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Express, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç middleware –¥–ª—è CORS, JSON/body parsing –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (`front` –∏ `/uploads`).
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –Ω–∞–±–æ—Ä —Ä–æ—É—Ç–æ–≤: `auth`, `photo`, `album`, `comment`.
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 404 –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ middleware (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ JSON-–æ—Ç–≤–µ—Ç—ã).
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ MongoDB –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `MONGO_URI`; –µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å ‚Äî —Å–µ—Ä–≤–µ—Ä –≤—Å—ë —Ä–∞–≤–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å).
- –ï—Å—Ç—å health-check: `GET /health`.

### `app/models`
- **`user.model.js`**: –ø–æ–ª—è `username`, `email`, `password`, `role`, `avatar`, `bio`, `favorites`. –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤ `pre('save')` —Å `bcryptjs`. –ú–µ—Ç–æ–¥ `comparePassword` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è.
- **`photo.model.js`**: –ø–æ–ª—è `title`, `description`, `imageUrl`, `category`, `location`, `likes` (—Å–ø–∏—Å–æ–∫ ObjectId –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π), `user` (–≤–ª–∞–¥–µ–ª–µ—Ü). –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å: `photoSchema.index({ title: 'text', description: 'text' })` –¥–ª—è –ø–æ–∏—Å–∫–∞.
- **`album.model.js`**: —Å–æ–¥–µ—Ä–∂–∏—Ç `photos` –∫–∞–∫ –º–∞—Å—Å–∏–≤ `ObjectId` –Ω–∞ `Photo`, `isPublic`, `user` –∏ —Ç.–¥.
- **`comment.model.js`**: —Ö—Ä–∞–Ω–∏—Ç `text`, `user` –∏ —Å—Å—ã–ª–∫—É –Ω–∞ `photo`.

> –°–≤—è–∑–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Mongoose `ref` ‚Äî —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.populate()` –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.

### `app/controllers`
- –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `photo.controller.js`) —Å–æ–¥–µ—Ä–∂–∏—Ç CRUD-–ª–æ–≥–∏–∫—É: –ø–æ–∏—Å–∫, —Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ. 
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `try/catch` –∏ –ø–µ—Ä–µ–¥–∞—é—Ç –æ—à–∏–±–∫–∏ –≤ `next(err)`, —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ `server.js`.
- –ü—Ä–∏–º–µ—Ä—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π:
  - `createPhoto` –æ–∂–∏–¥–∞–µ—Ç —Ñ–∞–π–ª, —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `imageUrl` (`/uploads/<filename>`) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç.
  - `getPhotos` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é: `?category=` –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ `?q=` —á–µ—Ä–µ–∑ `$text`.
  - `likePhoto` –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–ª–∏ —É–±–∏—Ä–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –º–∞—Å—Å–∏–≤–∞ `likes`.
  - –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤: –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª–µ—Ü (`photo.user.toString() === req.userId`) –∏–ª–∏ —Ä–æ–ª—å `admin`.

### `app/routes`
- –†–æ—É—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –≤ `server.js` –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è `(app) => app.use('/', router)`.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç `express-validator` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `auth.routes.js` –∏ `photo.routes.js`).

### `app/middlewares`
- **`authJwt.js`** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç header `Authorization`, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç JWT (`JWT_SECRET`) –∏ –∫–ª–∞–¥—ë—Ç `req.userId`, `req.userRole`. –¢–∞–∫–∂–µ –µ—Å—Ç—å —Ö–µ–ª–ø–µ—Ä `isRole(...roles)` –¥–ª—è —Ä–æ–ª–µ–π.
- **`upload.middleware.js`** ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ `multer` —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `diskStorage`, –¥–µ–ª–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `uploads` (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç), –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `Date.now()` + —Å–ª—É—á–∞–π–Ω–æ–π —á–∞—Å—Ç–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –ª–æ–∫–∞–ª—å–Ω–æ.

### `front/` (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
- `index.html`, `css/style.css`, `js/main.js` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã. `server.js` –≤—ã–¥–∞—ë—Ç –∏—Ö —á–µ—Ä–µ–∑ `express.static`. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ —Ç.–¥.).

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ‚ö†Ô∏è
- **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –°–µ–π—á–∞—Å –≤ `.env` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è JWT_SECRET –∏ MONGO_URI ‚Äî –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (vault, CI secrets, –∏–ª–∏ environment vars –≤ —Ö–æ—Å—Ç–∏–Ω–≥–µ).
- –î–æ–±–∞–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã –Ω–∞ `multer` (–º–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, —Ñ–∏–ª—å—Ç—Ä MIME), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.
- –î–æ–±–∞–≤–∏—Ç—å rate-limiting –∏/–∏–ª–∏ CORS-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API.
- –•—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å URL —Ñ–∞–π–ª–æ–≤; –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —É–¥–∞–ª—è—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏.

---

## –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å ‚úÖ
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `.env.example` ‚Üí `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`MONGO_URI`, `JWT_SECRET`, `PORT`).
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
npm run dev
```
4. –ü—Ä–æ–≤–µ—Ä–∫–∏:
- Health: `GET /health`
- –§—Ä–æ–Ω—Ç–µ–Ω–¥: –æ—Ç–∫—Ä—ã—Ç—å `http://localhost:<PORT>/`
- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–¥ `http://localhost:<PORT>/uploads/<filename>`

